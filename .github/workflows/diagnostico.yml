name: üîç Debug SSH Connection

on: [workflow_dispatch]

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
      
    - name: üîë Configurar SSH
      uses: webfactory/ssh-agent@v0.8.0
      with:
        ssh-private-key: ${{ secrets.HOSTINGER_SSH_KEY }}
        
    - name: üß™ Debug completo
      run: |
        echo "=== INICIO DEBUG ==="
        echo "Host: ${{ secrets.HOSTINGER_HOST }}"
        echo "User: ${{ secrets.HOSTINGER_USER }}"
        
        echo "1. Probando resoluci√≥n DNS..."
        nslookup ${{ secrets.HOSTINGER_HOST }} || echo "‚ùå DNS Fall√≥"
        
        echo "2. Probando ping..."
        ping -c 2 ${{ secrets.HOSTINGER_HOST }} || echo "‚ö†Ô∏è Ping no disponible"
        
        echo "3. Probando puerto 22..."
        timeout 10 nc -zv ${{ secrets.HOSTINGER_HOST }} 22 && echo "‚úÖ Puerto 22 abierto" || echo "‚ùå Puerto 22 cerrado"
        
        echo "4. Probando conexi√≥n SSH..."
        ssh -o StrictHostKeyChecking=no \
            -o ConnectTimeout=10 \
            -o LogLevel=DEBUG \
            ${{ secrets.HOSTINGER_USER }}@${{ secrets.HOSTINGER_HOST }} \
            "echo '‚úÖ SSH exitoso'" || echo "‚ùå SSH fall√≥"
        
        echo "=== FIN DEBUG ==="
