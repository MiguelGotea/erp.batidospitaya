// Actualizar solo el contador (sin recargar toda la tabla)
function actualizarContador() {
    const { expired, hours, minutes, seconds } = calcularTiempoRestante();
    
    let contadorHTML = '';
    if (expired) {
        contadorHTML = `
            <div class="countdown-banner countdown-expired-banner">
                üîí <strong>BLOQUEADO</strong> - Ya no se pueden registrar pedidos para entrega de ma√±ana
            </div>
        `;
    } else {
        const horasStr = String(hours).padStart(2, '0');
        const minutosStr = String(minutes).padStart(2, '0');
        const segundosStr = String(seconds).padStart(2, '0');
        
        let claseBanner = 'countdown-banner-normal';
        const totalMinutes = hours * 60 + minutes;
        if (totalMinutes < 30) {
            claseBanner = 'countdown-banner-critical';
        } else if (totalMinutes < 120) {
            claseBanner = 'countdown-banner-warning';
        }
        
        contadorHTML = `
            <div class="countdown-banner ${claseBanner}">
                ‚è∞ <strong>Tiempo restante para pedidos de HOY:</strong> 
                <span class="countdown-time">${horasStr}:${minutosStr}:${segundosStr}</span>
                <small>(Plazo l√≠mite: 12:00 PM)</small>
            </div>
        `;
    }
    
    // Actualizar solo el banner si existe
    const existingBanner = $('.countdown-banner');
    if (existingBanner.length > 0) {
        existingBanner.replaceWith(contadorHTML);
    }
}

// Iniciar contador regresivo
function iniciarContador() {
    // Actualizar cada segundo
    contadorInterval = setInterval(() => {
        actualizarContador();
        
        // Si el plazo expir√≥, recargar la tabla para bloquear la columna
        const { expired } = calcularTiempoRestante();
        if (expired && contadorInterval) {
            clearInterval(contadorInterval);
            renderizarTabla();
        }
    }, 1000);
}
